# =============================================================================
# Prometheus â€” Scrape Configuration
# =============================================================================
# All three application services expose /actuator/prometheus.
# We also scrape Kafka JMX exporter (if enabled) for broker-level metrics.
# =============================================================================
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: api-gateway
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['api-gateway:8080']
    relabel_configs:
      - source_labels: [__address__]
        target_label: service
        replacement: api-gateway

  - job_name: log-producer
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['log-producer:8081']
    relabel_configs:
      - source_labels: [__address__]
        target_label: service
        replacement: log-producer

  - job_name: log-consumer
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['log-consumer:8082']
    relabel_configs:
      - source_labels: [__address__]
        target_label: service
        replacement: log-consumer

  - job_name: prometheus
    static_configs:
      - targets: ['localhost:9090']
